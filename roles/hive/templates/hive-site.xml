<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <property>
    <name>javax.jdo.option.ConnectionURL</name>
    <value>jdbc:mysql://{{ metastore_host }}:{{ metastore_port }}/{{ metastore_db_name }}?useUnicode=true&amp;characterEncoding=UTF-8</value>
  </property>
  <property>
    <name>javax.jdo.option.ConnectionDriverName</name>
    <value>com.mysql.jdbc.Driver</value>
  </property>
  <property>
    <name>javax.jdo.option.ConnectionUserName</name>
    <value>{{ metastore_db_user }}</value>
  </property>
  <property>
    <name>javax.jdo.option.ConnectionPassword</name>
    <value>{{ metastore_db_pwd }}</value>
  </property>
  <property>
    <name>datanucleus.autoCreateSchema</name>
    <value>false</value>
  </property>
  <property>
    <name>datanucleus.metadata.validate</name>
    <value>true</value>
  </property>
  <!--<property>
    <name>datanucleus.fixedDatastore</name>
    <value>true</value>
  </property>-->
  <property>
    <name>hive.metastore.server.min.threads</name>
    <value>20</value>
  </property>
  <property>
    <name>hive.metastore.server.max.threads</name>
    <value>500</value>
  </property>
  <property>
    <name>datanucleus.autoStartMechanism</name>
    <value>SchemaTable</value>
  </property>
  <property>
    <name>hive.server2.authentication.kerberos.keytab</name>
    <value>/etc/hive/conf/hive.keytab</value>
  </property>
  <property>
    <name>hive.server2.enable.impersonation</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.server2.thrift.min.worker.threads</name>
    <value>5</value>
  </property>
  <property>
    <name>hive.server2.thrift.max.worker.threads</name>
    <value>100</value>
  </property>
  <property>
    <name>hive.server2.thrift.port</name>
    <value>10000</value>
  </property>
  <property>
    <name>fs.hdfs.impl.disable.cache</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.server2.use.SSL</name>
    <value>false</value>
  </property>
  <property>
    <name>hive.server2.logging.operation.enabled</name>
    <value>true</value>
  </property>
  <!--<property>
    <name>hive.metastore.local</name>
    <value>false</value>
  </property>-->
  <property>
    <name>hive.aux.jars.path</name>
    <value>file:///usr/lib/hive/lib/hive-hbase-handler-{{ hive_version }}-cdh{{ cdh_version }}.jar,file:///usr/lib/hbase/lib/hbase-client-{{ hbase_version }}-cdh{{ cdh_version }}.jar,file:///usr/lib/hbase/lib/hbase-hadoop2-compat-{{ hbase_version }}-cdh{{ cdh_version }}.jar,file:///usr/lib/hbase/lib/hbase-server-{{ hbase_version }}-cdh{{ cdh_version }}.jar,file:///usr/lib/hbase/lib/hbase-common-{{ hbase_version }}-cdh{{ cdh_version }}.jar,file:///usr/lib/hbase/lib/hbase-protocol-{{ hbase_version }}-cdh{{ cdh_version }}.jar,file:///usr/lib/hbase/lib/guava-12.0.1.jar,file:///usr/lib/hbase/lib/htrace-core.jar,file:///usr/lib/hbase/lib/hbase-hadoop-compat-{{ hbase_version }}-cdh{{ cdh_version }}.jar,file:///usr/lib/zookeeper/zookeeper-3.4.5-cdh{{ cdh_version }}.jar</value>
  </property>
  <property>
    <name>hive.metastore.uris</name>
    <value>{% for ms in metastore_servers %}thrift://{{ ms }}:9083{% if not loop.last %},{% endif %}{% endfor %}</value>
  </property>
  <property>
    <name>hive.metastore.client.socket.timeout</name>
    <value>300</value>
  </property>
  <property>
    <name>hive.metastore.warehouse.dir</name>
    <value>{{ warehouse_dir }}</value>
  </property>
  <property>
    <name>hive.warehouse.subdir.inherit.perms</name>
    <value>true</value>
  </property>
  <!--<property>
    <name>hive.cluster.delegation.token.store.class</name>
    <value>org.apache.hadoop.hive.thrift.ZooKeeperTokenStore</value>
  </property>
  <property>
    <name>hive.cluster.delegation.token.store.zookeeper.connectString</name>
    <value>strict</value>
  </property>-->
  <property>
    <name>mapred.reduce.tasks</name>
    <value>-1</value>
  </property>
  <property>
    <name>hive.exec.reducers.bytes.per.reducer</name>
    <value>1073741824</value>
  </property>
  <property>
    <name>hive.exec.reducers.max</name>
    <value>{{ max_reducers }}</value>
  </property>
  <property>
    <name>hive.metastore.execute.setugi</name>
    <value>false</value>
  </property>
  <property>
    <name>hive.metastore.schema.verification</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.metastore.authorization.storage.checks</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.users.in.admin.role</name>
    <value>ops_dev</value>
  </property>
  <property>
    <name>hive.support.concurrency</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.auto.convert.join</name>
    <value>false</value>
  </property>
  <property>
    <name>hive.zookeeper.quorum</name>
    <value>{% for host in groups['zookeeper'] %}{{ host }}{% if not loop.last %},{% endif %}{% endfor %}</value>
  </property>
  <property>
    <name>hive.zookeeper.client.port</name>
    <value>2181</value>
  </property>
  <property>
    <name>hbase.zookeeper.quorum</name>
    <value>{% for host in groups['zookeeper'] %}{{ host }}{% if not loop.last %},{% endif %}{% endfor %}</value>
  </property>
  <property>
    <name>hbase.zookeeper.property.clientPort</name>
    <value>2181</value>
  </property>
  <property>
    <name>hive.zookeeper.namespace</name>
    <value>hive_zookeeper_namespace_hive</value>
  </property>
  <property>
    <name>hive.server2.authentication</name>
    <value>KERBEROS</value>
  </property>
  <property>
    <name>hive.server2.authentication.kerberos.principal</name>
    <value>hive/_HOST@{{ cluster_domain|upper() }}</value>
  </property>
  <property>
    <name>hbase.security.authentication</name>
    <value>kerberos</value>
  </property>
  <property>
    <name>hbase.master.kerberos.principal</name>
    <value>hbase/_HOST@{{ cluster_domain|upper() }}</value>
  </property>
  <property>
    <name>hbase.regionserver.kerberos.principal</name>
    <value>hbase/_HOST@{{ cluster_domain|upper() }}</value>
  </property>
  <property>
    <name>hive.metastore.sasl.enabled</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.metastore.kerberos.keytab.file</name>
    <value>/etc/hive/conf/hive.keytab</value>
  </property>
  <property>
    <name>hive.metastore.kerberos.principal</name>
    <value>hive/_HOST@{{ cluster_domain|upper() }}</value>
  </property>
  <property>
    <name>hive.server2.enable.doAs</name>
    <value>true</value>
  </property>
  <property>
    <name>fs.hdfs.impl.disable.cache</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.exec.parallel</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.exec.parallel.thread.number</name>
    <value>3</value>
  </property>
  <property>
    <name>hive.map.aggr</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.groupby.skewindata</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.groupby.mapaggr.checkinterval</name>
    <value>100000</value>
  </property>
  <property>
    <name>hive.optimize.skewjoin</name>
    <value>false</value>
  </property>
  <property>
    <name>hive.cli.print.header</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.cli.print.current.db</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.cli.prompt</name>
    <value>hive</value>
  </property>
  <property>
    <name>hive.exec.scratchdir</name>
    <value>/tmp/hive-${user.name}</value>
  </property>
  <property>
    <name>hive.exec.local.scratchdir</name>
    <value>/tmp/${user.name}</value>
  </property>
  <property>
    <name>hive.start.cleanup.scratchdir</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.mapred.reduce.tasks.speculative.execution</name>
    <value>false</value>
  </property>
  <property>
    <name>hive.test.mode</name>
    <value>false</value>
  </property>
  <property>
    <name>hive.stats.dbclass</name>
    <value>jdbc:mysql</value>
  </property>
  <property>
    <name>hive.stats.autogather</name>
    <value>true</value>
  </property>
  <property>
    <name>hive.stats.jdbcdriver</name>
    <value>com.mysql.jdbc.Driver</value>
  </property>
  <property>
    <name>hive.stats.dbconnectionstring</name>
    <value>jdbc:mysql://{{ stat_host }}:{{ stat_port }}/TempStatsStore?useUnicode=true&amp;characterEncoding=UTF-8</value>
  </property>
  <property>
    <name>hive.security.authorization.enabled</name>
    <value>false</value>
  </property>
  <!--<property>
    <name>hive.security.authorization.manager</name>
    <value>org.apache.hadoop.hive.ql.security.authorization.DefaultHiveAuthorizationProvider</value>
  </property>
  <property>
    <name>hive.metastore.pre.event.listeners</name>
    <value>org.apache.hadoop.hive.ql.security.authorization.AuthorizationPreEventListener</value>
  </property>
  <property>
    <name>hive.security.metastore.authorization.manager</name>
    <value>org.apache.hadoop.hive.ql.security.authorization.DefaultHiveMetastoreAuthorizationProvider</value>
    <value>org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider,org.apache.hadoop.hive.ql.security.authorization.MetaStoreAuthzAPIAuthorizerEmbedOnly</value>
  </property>
  <property>
    <name>hive.security.authenticator.manager</name>
    <value>org.apache.hadoop.hive.ql.security.HadoopDefaultAuthenticator</value>
  </property>
  <property>
    <name>hive.security.metastore.authenticator.manager</name>
    <value>org.apache.hadoop.hive.ql.security.HadoopDefaultMetastoreAuthenticator</value>
  </property>
  <property>
    <name>hive.security.authorization.createtable.user.grants</name>
    <value>hadoop:ALL</value>
  </property>
  <property>
    <name>hive.security.authorization.createtable.group.grants</name>
    <value></value>
  </property>
  <property>
    <name>hive.security.authorization.createtable.role.grants</name>
    <value></value>
  </property>
  <property>
    <name>hive.security.authorization.createtable.owner.grants</name>
    <value>ALL</value>
  </property>-->
</configuration>
